
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user in the Orin platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "role": {
          "type": "string",
          "description": "User's role (student, mentor, or admin)."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "User's display name."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        },
        "profileDetails": {
          "type": "string",
          "description": "User's profile details."
        },
        "status": {
          "type": "string",
          "description": "User's status (e.g., active, inactive)."
        }
      },
      "required": [
        "id",
        "role",
        "email"
      ]
    },
    "StudentProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "StudentProfile",
      "type": "object",
      "description": "Represents the profile of a student user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the StudentProfile entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 StudentProfile)"
        },
        "classLevel": {
          "type": "string",
          "description": "Student's class level."
        },
        "academicGoals": {
          "type": "string",
          "description": "Student's academic goals."
        },
        "examTargets": {
          "type": "string",
          "description": "Student's exam targets."
        },
        "preferences": {
          "type": "string",
          "description": "Student's preferences."
        }
      },
      "required": [
        "id",
        "userId",
        "classLevel",
        "academicGoals",
        "examTargets",
        "preferences"
      ]
    },
    "MentorProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MentorProfile",
      "type": "object",
      "description": "Represents the profile of a mentor user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MentorProfile entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 MentorProfile)"
        },
        "bio": {
          "type": "string",
          "description": "Mentor's biography."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the mentor's photo.",
          "format": "uri"
        },
        "experienceYears": {
          "type": "number",
          "description": "Mentor's years of experience."
        },
        "qualifications": {
          "type": "string",
          "description": "Mentor's qualifications."
        },
        "languages": {
          "type": "string",
          "description": "Languages spoken by the mentor."
        },
        "verificationStatus": {
          "type": "string",
          "description": "Mentor's verification status."
        },
        "approvalStatus": {
          "type": "string",
          "description": "Mentor's approval status."
        }
      },
      "required": [
        "id",
        "userId",
        "bio",
        "photoURL",
        "experienceYears",
        "qualifications",
        "languages",
        "verificationStatus",
        "approvalStatus"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category for subjects and mentors.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the category."
        },
        "description": {
          "type": "string",
          "description": "Description of the category."
        },
        "parentCategoryId": {
          "type": "string",
          "description": "Reference to parent Category. (Relationship: Category 1:N Category)"
        }
      },
      "required": [
        "id",
        "name",
        "description"
      ]
    },
    "Subject": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Subject",
      "type": "object",
      "description": "Represents a subject within a category.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Subject entity."
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to Category. (Relationship: Category 1:N Subject)"
        },
        "subjectName": {
          "type": "string",
          "description": "Name of the subject."
        },
        "description": {
          "type": "string",
          "description": "Description of the subject."
        }
      },
      "required": [
        "id",
        "categoryId",
        "subjectName",
        "description"
      ]
    },
    "Exam": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Exam",
      "type": "object",
      "description": "Represents an exam specification linked to a category.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Exam entity."
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to Category. (Relationship: Category 1:N Exam)"
        },
        "examName": {
          "type": "string",
          "description": "Name of the exam."
        }
      },
      "required": [
        "id",
        "categoryId",
        "examName"
      ]
    },
    "MentorExpertise": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MentorExpertise",
      "type": "object",
      "description": "Junction table linking mentors to subjects and exams.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MentorExpertise entity."
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to MentorProfile. (Relationship: MentorProfile 1:N MentorExpertise)"
        },
        "subjectId": {
          "type": "string",
          "description": "Reference to Subject. (Relationship: Subject 1:N MentorExpertise)"
        },
        "examId": {
          "type": "string",
          "description": "Reference to Exam. (Relationship: Exam 1:N MentorExpertise)"
        }
      },
      "required": [
        "id",
        "mentorId",
        "subjectId",
        "examId"
      ]
    },
    "MentorCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MentorCategory",
      "type": "object",
      "description": "Junction table for mentor category associations.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MentorCategory entity."
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to MentorProfile. (Relationship: MentorProfile 1:N MentorCategory)"
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to Category. (Relationship: Category 1:N MentorCategory)"
        }
      },
      "required": [
        "id",
        "mentorId",
        "categoryId"
      ]
    },
    "TimeSlot": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TimeSlot",
      "type": "object",
      "description": "Represents a time slot for mentor availability.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the TimeSlot entity."
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to MentorProfile. (Relationship: MentorProfile 1:N TimeSlot)"
        },
        "date": {
          "type": "string",
          "description": "Date of the time slot.",
          "format": "date"
        },
        "startTime": {
          "type": "string",
          "description": "Start time of the time slot.",
          "format": "time"
        },
        "endTime": {
          "type": "string",
          "description": "End time of the time slot.",
          "format": "time"
        },
        "bookingStatus": {
          "type": "string",
          "description": "Booking status of the time slot (e.g., available, booked)."
        }
      },
      "required": [
        "id",
        "mentorId",
        "date",
        "startTime",
        "endTime",
        "bookingStatus"
      ]
    },
    "Booking": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Booking",
      "type": "object",
      "description": "Represents a booking made by a student for a mentor's session. Contains denormalized data for efficient querying.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Booking entity."
        },
        "studentId": {
          "type": "string",
          "description": "Reference to User (student)."
        },
        "studentName": {
            "type": "string",
            "description": "Denormalized display name of the student."
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to User (mentor)."
        },
        "mentorName": {
            "type": "string",
            "description": "Denormalized display name of the mentor."
        },
        "date": {
          "type": "string",
          "description": "The date of the session.",
          "format": "date"
        },
        "time": {
          "type": "string",
          "description": "The time of the session."
        },
        "subject": {
            "type": "string",
            "description": "The subject of the session."
        },
        "status": {
          "type": "string",
          "description": "Status of the booking (e.g., pending, confirmed, completed, cancelled)."
        },
        "price": {
          "type": "number",
          "description": "Price of the booking."
        },
        "createdAt": {
            "type": "string",
            "description": "Timestamp when the booking was created.",
            "format": "date-time"
        }
      },
      "required": [
        "id",
        "studentId",
        "studentName",
        "mentorId",
        "mentorName",
        "date",
        "time",
        "subject",
        "status",
        "price",
        "createdAt"
      ]
    },
    "Review": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Review",
      "type": "object",
      "description": "Represents a review given by a student for a mentor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Review entity."
        },
        "studentId": {
          "type": "string",
          "description": "Reference to User (student). (Relationship: User 1:N Review)"
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to User (mentor). (Relationship: User 1:N Review)"
        },
        "bookingId": {
          "type": "string",
          "description": "Reference to Booking. (Relationship: Booking 1:N Review)"
        },
        "rating": {
          "type": "number",
          "description": "Rating given by the student (1-5)."
        },
        "reviewText": {
          "type": "string",
          "description": "Text of the review."
        }
      },
      "required": [
        "id",
        "studentId",
        "mentorId",
        "bookingId",
        "rating",
        "reviewText"
      ]
    },
    "Favorite": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Favorite",
      "type": "object",
      "description": "Represents a student's favorite mentor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Favorite entity."
        },
        "studentId": {
          "type": "string",
          "description": "Reference to User (student). (Relationship: User 1:N Favorite)"
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to User (mentor). (Relationship: User 1:N Favorite)"
        }
      },
      "required": [
        "id",
        "studentId",
        "mentorId"
      ]
    },
    "ChatMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ChatMessage",
      "type": "object",
      "description": "Represents a chat message between a student and a mentor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ChatMessage entity."
        },
        "senderId": {
          "type": "string",
          "description": "Reference to User (sender). (Relationship: User 1:N ChatMessage)"
        },
        "receiverId": {
          "type": "string",
          "description": "Reference to User (receiver). (Relationship: User 1:N ChatMessage)"
        },
        "bookingId": {
          "type": "string",
          "description": "Reference to Booking. (Relationship: Booking 1:N ChatMessage)"
        },
        "messageText": {
          "type": "string",
          "description": "Text of the message."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of the message.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "senderId",
        "receiverId",
        "bookingId",
        "messageText",
        "timestamp"
      ]
    },
    "Resource": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Resource",
      "type": "object",
      "description": "Represents a resource uploaded by a mentor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Resource entity."
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to User (mentor). (Relationship: User 1:N Resource)"
        },
        "title": {
          "type": "string",
          "description": "Title of the resource."
        },
        "fileURL": {
          "type": "string",
          "description": "URL of the resource file.",
          "format": "uri"
        },
        "accessPermissions": {
          "type": "string",
          "description": "Access permissions for the resource."
        }
      },
      "required": [
        "id",
        "mentorId",
        "title",
        "fileURL",
        "accessPermissions"
      ]
    },
    "Transaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Transaction",
      "type": "object",
      "description": "Represents a transaction for payment tracking.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Transaction entity."
        },
        "bookingId": {
          "type": "string",
          "description": "Reference to Booking. (Relationship: Booking 1:N Transaction)"
        },
        "paymentAmount": {
          "type": "number",
          "description": "The amount paid in the transaction."
        },
        "platformCommission": {
          "type": "number",
          "description": "Commission taken by the platform."
        },
        "mentorEarnings": {
          "type": "number",
          "description": "Earnings of the mentor after commission."
        },
        "transactionDate": {
          "type": "string",
          "description": "The date the transaction occurred.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "bookingId",
        "paymentAmount",
        "platformCommission",
        "mentorEarnings",
        "transactionDate"
      ]
    },
    "CouponCode": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CouponCode",
      "type": "object",
      "description": "Represents a coupon code for discounts.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the CouponCode entity."
        },
        "code": {
          "type": "string",
          "description": "The coupon code."
        },
        "discountType": {
          "type": "string",
          "description": "Type of discount (percentage/fixed)."
        },
        "value": {
          "type": "number",
          "description": "Value of the discount."
        },
        "expiry": {
          "type": "string",
          "description": "Expiry date of the coupon code.",
          "format": "date-time"
        },
        "usageLimits": {
          "type": "number",
          "description": "Usage limits for the coupon code."
        }
      },
      "required": [
        "id",
        "code",
        "discountType",
        "value",
        "expiry",
        "usageLimits"
      ]
    },
    "Notification": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Notification",
      "type": "object",
      "description": "Represents a notification for email/in-app notifications.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Notification entity."
        },
        "recipientId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Notification)"
        },
        "type": {
          "type": "string",
          "description": "Type of notification (e.g., email, in-app)."
        },
        "content": {
          "type": "string",
          "description": "Content of the notification."
        },
        "readStatus": {
          "type": "boolean",
          "description": "Read status of the notification."
        }
      },
      "required": [
        "id",
        "recipientId",
        "type",
        "content",
        "readStatus"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profiles. Accessible by the user and admins."
    },
    "/users/{userId}/student_profile": {
      "schema": {
        "$ref": "#/entities/StudentProfile"
      },
      "description": "Stores student profile information. Accessible by the student and admins."
    },
    "/users/{userId}/mentor_profile": {
      "schema": {
        "$ref": "#/entities/MentorProfile"
      },
      "description": "Stores mentor profile information. Accessible by the mentor and admins."
    },
    "/categories/{categoryId}": {
      "schema": {
        "$ref": "#/entities/Category"
      },
      "description": "Stores categories for subjects and mentors. Publicly readable."
    },
    "/categories/{categoryId}/subjects/{subjectId}": {
      "schema": {
        "$ref": "#/entities/Subject"
      },
      "description": "Stores subjects within a category. Publicly readable."
    },
    "/categories/{categoryId}/exams/{examId}": {
      "schema": {
        "$ref": "#/entities/Exam"
      },
      "description": "Stores exam specifications linked to a category. Publicly readable."
    },
    "/mentor_expertise/{mentorExpertiseId}": {
      "schema": {
        "$ref": "#/entities/MentorExpertise"
      },
      "description": "Junction table linking mentors to subjects and exams. Accessible by admins."
    },
    "/mentor_categories/{mentorCategoryId}": {
      "schema": {
        "$ref": "#/entities/MentorCategory"
      },
      "description": "Junction table for mentor category associations. Accessible by admins."
    },
    "/users/{mentorId}/timeslots/{timeSlotId}": {
      "schema": {
        "$ref": "#/entities/TimeSlot"
      },
      "description": "Stores time slots for mentor availability. Accessible by the mentor and admins."
    },
    "/bookings/{bookingId}": {
      "schema": {
        "$ref": "#/entities/Booking"
      },
      "description": "Stores booking information. Includes denormalized 'studentId' and 'mentorId' for authorization independence. Accessible by the student, the mentor and admins."
    },
    "/bookings/{bookingId}/reviews/{reviewId}": {
      "schema": {
        "$ref": "#/entities/Review"
      },
      "description": "Stores reviews given by a student for a mentor. Accessible by the student, the mentor and admins."
    },
    "/users/{studentId}/favorites/{favoriteId}": {
      "schema": {
        "$ref": "#/entities/Favorite"
      },
      "description": "Stores a student's favorite mentors. Accessible by the student and admins."
    },
    "/bookings/{bookingId}/chat_messages/{messageId}": {
      "schema": {
        "$ref": "#/entities/ChatMessage"
      },
      "description": "Stores chat messages between a student and a mentor. Accessible by the student, the mentor and admins."
    },
    "/users/{mentorId}/resources/{resourceId}": {
      "schema": {
        "$ref": "#/entities/Resource"
      },
      "description": "Stores resources uploaded by a mentor. Accessible by the mentor and admins."
    },
    "/transactions/{transactionId}": {
      "schema": {
        "$ref": "#/entities/Transaction"
      },
      "description": "Stores transaction information for payment tracking. Accessible by admins."
    },
    "/coupon_codes/{couponCodeId}": {
      "schema": {
        "$ref": "#/entities/CouponCode"
      },
      "description": "Stores coupon codes for discounts. Accessible by admins."
    },
    "/notifications/{notificationId}": {
      "schema": {
        "$ref": "#/entities/Notification"
      },
      "description": "Stores notifications for email/in-app notifications. Accessible by admins."
    },
    "/roles_admin/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Documents in this collection represent admin users.  The *existence* of a document indicates admin role."
    }
  }
}

